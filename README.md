# Aina Flutter

Мобильное приложение Aina, разработанное на Flutter для платформ iOS и Android. Приложение предоставляет пользователям возможность взаимодействия с торговыми центрами, коворкингами и другими объектами.

## Основные функции

### 1. Управление профилем
- Редактирование персональной информации
- Управление видимостью профиля
- Загрузка и редактирование фотографий
- Настройка контактной информации

### 2. Коворкинг
- Просмотр доступных рабочих мест
- Бронирование коворкингов
- Управление бронированиями
- История использования

### 3. Торговые центры
- Просмотр информации о ТРЦ
- Акции и специальные предложения
- Навигация по ТРЦ
- Интерактивные карты

### 4. Социальные функции
- Создание и управление карточкой сообщества
- Взаимодействие с другими пользователями
- Обмен контактами
- Социальные мероприятия

## Содержание

- [Обзор проекта](#обзор-проекта)
- [Установка и запуск](#установка-и-запуск)
- [Архитектура проекта](#архитектура-проекта)
  - [FSD методология](#fsd-методология)
  - [Слои (Layers)](#слои-layers)
  - [Слайсы (Slices)](#слайсы-slices)
  - [Сегменты (Segments)](#сегменты-segments)
  - [Правила и ограничения](#правила-и-ограничения)
- [Стек технологий](#стек-технологий)
- [Работа с API](#работа-с-api)
- [Локализация](#локализация)
- [Тестирование](#тестирование)
- [Сборка и деплой](#сборка-и-деплой)

## Обзор проекта

Aina - это мобильное приложение для управления и взаимодействия с торговыми центрами, коворкингами и другими объектами. Приложение предоставляет пользователям возможность просматривать информацию о ТРЦ, бронировать коворкинги, просматривать акции и многое другое.

## Установка и запуск

### Требования

- Flutter SDK 3.0.0 или выше
- Dart 2.17.0 или выше
- Android Studio / VS Code с плагинами Flutter и Dart
- iOS: Xcode 13.0 или выше (для разработки под iOS)
- Android: Android SDK 21 или выше

### Установка зависимостей

```bash
flutter pub get
```

### Запуск приложения

```bash
flutter run
```

## Архитектура проекта

### FSD методология

Проект построен по методологии Feature-Sliced Design (FSD), которая обеспечивает:
- Масштабируемость
- Изоляцию функциональности
- Переиспользуемость компонентов
- Четкое разделение ответственности

### Слои (Layers)

```
lib/
├── app/           # Инициализация приложения
│   ├── styles/        # Глобальные стили приложения
│   ├── providers/     # Глобальные провайдеры состояния
│   ├── assets/        # Ресурсы приложения (изображения, шрифты)
│   └── app.dart       # Корневой виджет приложения
│
├── processes/     # Процессы уровня приложения
│   ├── auth/         # Процесс авторизации
│   │   ├── model/       # Логика авторизации
│   │   │   └── services/   # Сервисы авторизации
│   │   ├── ui/          # UI компоненты авторизации
│   │   └── api/         # API авторизации
│   │
│   └── navigation/   # Процесс навигации
│       ├── model/       # Логика навигации
│       └── ui/          # UI компоненты навигации
│
├── pages/         # Композиционный слой
│   ├── home/         # Главная страница
│   │   ├── view.dart    # Виджет страницы
│   │   └── widgets/     # Специфичные для страницы виджеты
│   │
│   ├── profile/      # Страница профиля
│   └── settings/     # Страница настроек
│
├── widgets/       # Переиспользуемые UI компоненты
│   ├── buttons/      # Кнопки
│   ├── inputs/       # Поля ввода
│   └── cards/        # Карточки
│
├── features/      # Бизнес-функциональность
│   ├── user/         # Функциональность пользователя
│   │   ├── ui/          # UI компоненты
│   │   ├── model/       # Бизнес-логика
│   │   │   ├── store/      # Состояние
│   │   │   └── services/   # Сервисы фичи
│   │   └── api/         # API взаимодействие
│   │
│   └── coworking/    # Функциональность коворкинга
│       ├── ui/
│       ├── model/
│       │   ├── store/
│       │   └── services/   # Сервисы коворкинга
│       └── api/
│
├── entities/      # Бизнес-сущности
│   └── user/         # Сущность пользователя
│
└── shared/        # Общий код
    ├── api/          # Базовый API клиент
    ├── config/       # Конфигурация приложения
    ├── services/     # Общие сервисы
    │   ├── storage/     # Сервис хранения
    │   ├── analytics/   # Сервис аналитики
    │   └── logger/      # Сервис логирования
    ├── types/        # Общие типы
    └── utils/        # Утилиты
```

### Распределение сервисов

В FSD сервисы распределяются по слоям в зависимости от их назначения:

1. **shared/services/** - общие сервисы, используемые во всем приложении:
   - Сервис хранения (localStorage, secureStorage)
   - Сервис аналитики
   - Сервис логирования
   - Сервис push-уведомлений

2. **features/[feature]/model/services/** - сервисы конкретной фичи:
   - Сервисы бизнес-логики
   - Сервисы управления состоянием
   - Сервисы обработки данных

3. **processes/[process]/model/services/** - сервисы глобальных процессов:
   - Сервисы авторизации
   - Сервисы навигации
   - Сервисы глобального состояния

### Слайсы (Slices)

Слайсы - это функциональные разделы приложения. Каждый слайс представляет собой отдельную бизнес-сущность или функциональность:

```
features/
├── user/          # Слайс пользователя
├── coworking/     # Слайс коворкинга
└── malls/         # Слайс ТРЦ
```

### Сегменты (Segments)

Каждый слайс разделен на сегменты, определяющие тип функциональности:

```
feature/user/
├── ui/           # UI компоненты
│   ├── components/  # Переиспользуемые компоненты
│   └── screens/     # Экраны
├── model/        # Бизнес-логика и состояние
│   ├── store/       # Хранилище состояния
│   └── services/    # Сервисы
└── api/          # API взаимодействие
    ├── dto/         # Объекты передачи данных
    └── methods.dart # API методы
```

### Правила и ограничения

#### 1. Правила импортов

- Слои могут импортировать только нижележащие слои:
```dart
// Правильно (pages -> features)
import 'package:app/features/user/ui/user_card.dart';

// Неправильно (features -> pages)
import 'package:app/pages/home/home_page.dart';
```

#### 2. Правила сегментов

- UI может импортировать model и api
- Model может импортировать только api
- API не может импортировать ui и model

```dart
// features/user/ui/user_card.dart
import '../model/user_store.dart';  // Правильно
import '../api/user_api.dart';      // Правильно

// features/user/model/user_store.dart
import '../api/user_api.dart';      // Правильно
import '../ui/user_card.dart';      // Неправильно!

// features/user/api/user_api.dart
import '../model/user_store.dart';  // Неправильно!
import '../ui/user_card.dart';      // Неправильно!
```

#### 3. Правила слайсов

- Слайсы не должны импортировать друг друга напрямую
- Для общения между слайсами используйте shared или entities

#### 4. Правила именования

- Файлы: snake_case (user_card.dart)
- Классы: PascalCase (UserCard)
- Переменные и методы: camelCase (getUserData)
- Константы: SCREAMING_SNAKE_CASE (API_URL)

## Стек технологий

- **State Management**: Riverpod
- **Navigation**: GoRouter
- **HTTP Client**: Dio
- **Локализация**: easy_localization
- **UI компоненты**: Material Design
- **Хранение данных**: SharedPreferences, Hive
- **Аналитика**: Firebase Analytics
- **Push-уведомления**: Firebase Cloud Messaging

## Работа с API

API взаимодействие организовано через слой shared/api:

```dart
// shared/api/client.dart
class ApiClient {
  final Dio dio;
  
  ApiClient() {
    dio = Dio(BaseOptions(
      baseUrl: 'https://api.example.com',
      // ...
    ));
  }
}

// features/user/api/user_api.dart
class UserApi {
  final ApiClient _client;
  
  Future<UserDto> getUser(String id) async {
    final response = await _client.dio.get('/users/$id');
    return UserDto.fromJson(response.data);
  }
}
```

## Локализация

Переводы хранятся в assets/translations и организованы по фичам:

```
assets/translations/
├── ru.json
├── en.json
└── kk.json
```

Использование:
```dart
Text('user.profile.title'.tr())
```

## Тестирование

Тесты организованы по той же структуре, что и код:

```
test/
├── features/
│   └── user/
│       ├── ui/
│       ├── model/
│       └── api/
├── entities/
└── shared/
```

### Типы тестов

1. **Unit Tests**: Тестирование отдельных компонентов и сервисов
2. **Widget Tests**: Тестирование UI компонентов
3. **Integration Tests**: Тестирование взаимодействия между компонентами
4. **E2E Tests**: Тестирование полных пользовательских сценариев

## Сборка и деплой

### Android

```bash
flutter build apk --release
```

### iOS

```bash
flutter build ios --release
```

## Правила и ограничения

### 1. Правила импортов

- Слои могут импортировать только нижележащие слои:
```dart
// Правильно (pages -> features)
import 'package:app/features/user/ui/user_card.dart';

// Неправильно (features -> pages)
import 'package:app/pages/home/home_page.dart';
```

### 2. Правила сегментов

- UI может импортировать model и api
- Model может импортировать только api
- API не может импортировать ui и model

```dart
// features/user/ui/user_card.dart
import '../model/user_store.dart';  // Правильно
import '../api/user_api.dart';      // Правильно

// features/user/model/user_store.dart
import '../api/user_api.dart';      // Правильно
import '../ui/user_card.dart';      // Неправильно!

// features/user/api/user_api.dart
import '../model/user_store.dart';  // Неправильно!
import '../ui/user_card.dart';      // Неправильно!
```

### 3. Правила слайсов

- Слайсы не должны импортировать друг друга напрямую
- Для общения между слайсами используйте shared или entities

### 4. Правила именования

- Файлы: snake_case (user_card.dart)
- Классы: PascalCase (UserCard)
- Переменные и методы: camelCase (getUserData)
- Константы: SCREAMING_SNAKE_CASE (API_URL)

## Поддержка и обратная связь

Для получения поддержки или отправки обратной связи:
1. Создайте issue в репозитории проекта
2. Опишите проблему или предложение
3. Укажите версию приложения и платформу
4. Прикрепите скриншоты или логи, если необходимо

## Лицензия

MIT License
